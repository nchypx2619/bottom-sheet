/*
 * Bottom Sheet
 * Version: 1.0
 * Author: nchypx2619
 * License: MIT
 * Description: Trigger all components to visible bottom-sheet on bottom in page. âœ¨ (https://github.com/nchypx2619/bottom-sheet)
 */
jQuery.fn.extend({bottomSheet:function(e){return this.each(function(){let t="bottomsheet";this.id&&(t=`${this.id}-${t}`);let l=document.getElementById(t),o=document.getElementById(`${this.id}-${t}-toggle-btn`),n=null!==document.getElementById(t),d=null,i=null,s=null,a=null,r=!1,c=e=>e.touches||e.originalEvent.touches,h=e=>{let t=c(e)[0];d=t.clientY},m=e=>{a&&(a=s),null===a&&s&&(a=s),s=e.touches[0].clientY,a&&(r=a>s);let l=d-s;l>0||(document.querySelector(`#${t} .modal-dialog`).style.bottom=`${l}px`)},u=e=>{let l=document.querySelector(`#${t} .modal-dialog`)?.offsetTop;i=e.changedTouches[0].clientY,d&&i<l||r?document.querySelector(`#${t} .modal-dialog`).style.bottom="0px":(document.querySelector(`#${t} .modal-dialog`).style.bottom="-100%",setTimeout(()=>{$(`#${t}`).modal("hide")},100)),d=null,i=null,s=null,a=null,r=!1},v=()=>$(l).modal("show");if("object"==typeof e){if(e.content&&!n&&$(document.body).append(`<div class="modal sheet-bottom fade" id="${t}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><div id="${this.id}-${t}-toggle-btn" class="bottom-sheet-toggle-btn w-100 text-center" ><svg width="41" height="4" viewBox="0 0 41 4" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.5" width="40" height="4" rx="2" fill="#E2E3E5"/></svg></div></div><div class="modal-body">${e.content}</div></div></div></div>`),!n){function g(e){let l=document.querySelector(`#${t} .modal-dialog`)?.offsetTop,o=e.touches[0]?.clientY??e.originalEvent.touches[0]?.clientY;if(o>l)return!1;u(e)}null===l&&(l=document.getElementById(t)),l.addEventListener("shown.bs.modal",function(){document.querySelector(`#${t} .modal-dialog`).style.bottom="0px"}),l.addEventListener("touchstart",g),null===o&&(o=document.getElementById(`${this.id}-${t}-toggle-btn`)),o.addEventListener("touchstart",h),o.addEventListener("touchmove",m),o.addEventListener("touchend",u),this.addEventListener("click",v)}}else"string"==typeof e&&"destroy"===e&&n&&(this.removeEventListener("click",v),l.removeEventListener("touchstart",g),o.removeEventListener("touchstart",h),o.removeEventListener("touchmove",m),o.removeEventListener("touchend",u),$(l).modal("hide"),document.getElementById(t).remove())})}});
